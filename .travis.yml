language: cpp

sudo: false
dist: precise
group: legacy

os:
  - linux

compiler:
  - clang

git:
  depth: 30


cache:
  apt
  directories:
    - $HOME/deps

addons:
  postgresql: "9.4"
  apt:
    sources:
      - ubuntu-toolchain-r
      - llvm-toolchain-precise-3.7
    packages:
      - cmake
      - bison
      - cmake-data
      - doxygen
      - flex
      - graphviz
      - grass-dev
      - libexpat1-dev
      - libfcgi-dev
      - libgdal1-dev
      - libgeos-dev
      - libgsl0-dev
      - libpq-dev
      - libproj-dev
      - libqca2-dev
      - libqca2-plugin-ossl
      - libqscintilla2-dev
      - libqt4-dev
      - libqt4-opengl-dev
      - libqt4-sql-sqlite
      - libqtwebkit-dev
      - libqwt-dev
      - libspatialindex-dev
      - libspatialite-dev
      - libsqlite3-dev
      - pkg-config
      - poppler-utils
      - pyqt4-dev-tools
      - python
      - python-dev
      - python-qt4
      - python-qt4-dev
      - python-qt4-sql
      - python-sip
      - python-sip-dev
      - python-gdal
      - spawn-fcgi
      - txt2tags
      - xauth
      - xfonts-100dpi
      - xfonts-75dpi
      - xfonts-base
      - xvfb
      - python-pip
      - flip
      - clang-3.7

#notifications:
#  irc: "chat.freenode.net#qgis-test"
#  on_failure: change
#  on_success: change
#  skip_join: true
#
#notifications:
#  webhooks:
#    urls:
#      - https://webhooks.gitter.im/e/467e3aff72e344d1dae3
#    on_success: change  # options: [always|never|change] default: always
#    on_failure: always # options: [always|never|change] default: always
#    on_start: never # default: never

before_install:
  - ./ci/travis/${TRAVIS_OS_NAME}/before_install.sh

install:
  - ./ci/travis/${TRAVIS_OS_NAME}/install.sh

before_script:
  - ./ci/travis/${TRAVIS_OS_NAME}/before_script.sh

script:
  - ./ci/travis/${TRAVIS_OS_NAME}/script.sh

after_script:
  - ./ci/travis/${TRAVIS_OS_NAME}/after_script.sh
